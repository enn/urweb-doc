<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Table Declarations</TITLE>
<META NAME="description" CONTENT="Table Declarations">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node51.html">
<LINK REL="previous" HREF="node49.html">
<LINK REL="up" HREF="node49.html">
<LINK REL="next" HREF="node51.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html802"
  HREF="node51.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="icons/next.png"></A> 
<A NAME="tex2html798"
  HREF="node49.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="icons/up.png"></A> 
<A NAME="tex2html792"
  HREF="node49.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="icons/prev.png"></A> 
<A NAME="tex2html800"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html803"
  HREF="node51.html">Queries</A>
<B> Up:</B> <A NAME="tex2html799"
  HREF="node49.html">SQL</A>
<B> Previous:</B> <A NAME="tex2html793"
  HREF="node49.html">SQL</A>
 &nbsp; <B>  <A NAME="tex2html801"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION000101100000000000000"></A><A NAME="tables"></A>
<BR>
Table Declarations
</H3>

<P>
<!-- MATH
 $\mathsf{table}$
 -->
<IMG
 WIDTH="36" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img42.png"
 ALT="$ \mathsf{table}$">
 declarations may include constraints, via these grammar rules.
<P><!-- MATH
 \begin{displaymath}
\begin{array}{rrcll}
  \textrm{Declarations} & d &::=& \mathsf{table} \; x : c \; [pk[,]] \; cts \mid \mathsf{view} \; x = V \\
  \textrm{Primary key constraints} & pk &::=& \mathsf{PRIMARY} \; \mathsf{KEY} \; K \\
  \textrm{Keys} & K &::=& f \mid (f, (f,)^+) \mid \{\{e\}\} \\
  \textrm{Constraint sets} & cts &::=& \mathsf{CONSTRAINT} f \; ct \mid cts, cts \mid \{\{e\}\} \\
  \textrm{Constraints} & ct &::=& \mathsf{UNIQUE} \; K \mid \mathsf{CHECK} \; E \\
  &&& \mid \mathsf{FOREIGN} \; \mathsf{KEY} \; K \; \mathsf{REFERENCES} \; F \; (K) \; [\mathsf{ON} \; \mathsf{DELETE} \; pr] \; [\mathsf{ON} \; \mathsf{UPDATE} \; pr] \\
  \textrm{Foreign tables} & F &::=& x \mid \{\{e\}\} \\
  \textrm{Propagation modes} & pr &::=& \mathsf{NO} \; \mathsf{ACTION} \mid \mathsf{RESTRICT} \mid \mathsf{CASCADE} \mid \mathsf{SET} \; \mathsf{NULL} \\
  \textrm{View expressions} & V &::=& Q \mid \{e\}
\end{array}
\end{displaymath}
 -->
</P>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="779" HEIGHT="178" BORDER="0"
 SRC="img539.png"
 ALT="\begin{displaymath}\begin{array}{rrcll}
\textrm{Declarations} &amp; d &amp;::=&amp; \mathsf...
...
\textrm{View expressions} &amp; V &amp;::=&amp; Q \mid \{e\}
\end{array}\end{displaymath}">
</DIV><P>
</P>

<P>
A signature item <!-- MATH
 $\mathsf{table} \; \mathsf{x} : \mathsf{c}$
 -->
<IMG
 WIDTH="68" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img540.png"
 ALT="$ \mathsf{table} \; \mathsf{x} : \mathsf{c}$">
 is actually elaborated into two signature items: <!-- MATH
 $\mathsf{con} \; \mathsf{x\_hidden\_constraints} :: \{\{\mathsf{Unit}\}\}$
 -->
<IMG
 WIDTH="246" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img541.png"
 ALT="$ \mathsf{con} \; \mathsf{x\_hidden\_constraints} :: \{\{\mathsf{Unit}\}\}$">
 and <!-- MATH
 $\mathsf{val} \; \mathsf{x} : \mathsf{sql\_table} \; \mathsf{c} \; \mathsf{x\_hidden\_constraints}$
 -->
<IMG
 WIDTH="256" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img542.png"
 ALT="$ \mathsf{val} \; \mathsf{x} : \mathsf{sql\_table} \; \mathsf{c} \; \mathsf{x\_hidden\_constraints}$">
.  This is appropriate for common cases where client code doesn't care which keys a table has.  It's also possible to include constraints after a <!-- MATH
 $\mathsf{table}$
 -->
<IMG
 WIDTH="36" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img42.png"
 ALT="$ \mathsf{table}$">
 signature item, with the same syntax as for <!-- MATH
 $\mathsf{table}$
 -->
<IMG
 WIDTH="36" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img42.png"
 ALT="$ \mathsf{table}$">
 declarations.  This may look like dependent typing, but it's just a convenience.  The constraints are type-checked to determine a constructor <IMG
 WIDTH="13" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img543.png"
 ALT="$ u$">
 to include in <!-- MATH
 $\mathsf{val} \; \mathsf{x} : \mathsf{sql\_table} \; \mathsf{c} \; (u + \hspace{-.075in} + \;\mathsf{x\_hidden\_constraints})$
 -->
<IMG
 WIDTH="306" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img544.png"
 ALT="$ \mathsf{val} \; \mathsf{x} : \mathsf{sql\_table} \; \mathsf{c} \; (u + \hspace{-.075in} + \;\mathsf{x\_hidden\_constraints})$">
, and then the expressions are thrown away.  Nonetheless, it can be useful for documentation purposes to include table constraint details in signatures.  Note that the automatic generation of <!-- MATH
 $\mathsf{x\_hidden\_constraints}$
 -->
<IMG
 WIDTH="140" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img545.png"
 ALT="$ \mathsf{x\_hidden\_constraints}$">
 leads to a kind of free subtyping with respect to which constraints are defined.

<P>
<BR><HR>
<ADDRESS>

2014-07-14
</ADDRESS>
</BODY>
</HTML>
